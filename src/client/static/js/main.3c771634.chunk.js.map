{"version":3,"sources":["lib/graphql/globalTypes.ts","lib/graphql/mutations/LogIn/index.ts","lib/graphql/mutations/LogOut/index.ts","lib/graphql/mutations/ConnectStripe/index.ts","lib/graphql/mutations/DisconnectStripe/index.ts","lib/graphql/mutations/HostListing/index.ts","lib/graphql/mutations/CreateBooking/index.ts","lib/utils/index.ts","sections/AppHeader/components/MenuItems/index.tsx","sections/AppHeader/index.tsx","sections/AppHeader/assets/tinyhouse-logo.png","sections/Home/assets/dubai.jpg","sections/Home/assets/london.jpg","sections/Home/assets/los-angeles.jpg","sections/Home/assets/toronto.jpg","sections/Home/components/HomeHero/index.tsx","lib/components/ErrorBanner/index.tsx","lib/components/AppHeaderSkeleton/index.tsx","lib/components/AppHeaderSkeleton/assets/tinyhouse-logo.png","lib/components/PageSkeleton/index.tsx","lib/components/ListingCard/index.tsx","sections/Home/components/HomeListings/index.tsx","sections/Home/components/HomeListingsSkeleton/index.tsx","sections/Home/assets/listing-loading-card-cover.jpg","lib/graphql/queries/AuthUrl/index.ts","lib/graphql/queries/Listing/index.ts","lib/graphql/queries/Listings/index.ts","lib/graphql/queries/User/index.ts","sections/Home/assets/map-background.jpg","sections/Home/assets/san-fransisco.jpg","sections/Home/assets/cancun.jpg","sections/Home/index.tsx","sections/Host/index.tsx","sections/Listings/components/ListingsFilters/index.tsx","sections/Listings/components/ListingsPagination/index.tsx","sections/Listings/components/ListingsSkeleton/index.tsx","sections/Listings/assets/listing-loading-card-cover.jpg","sections/Listings/index.tsx","sections/Listing/components/ListingDetails/index.tsx","sections/Listing/components/ListingBookings/index.tsx","sections/Listing/components/ListingCreateBooking/index.tsx","sections/Listing/components/ListingCreateBookingModal/index.tsx","sections/Listing/index.tsx","sections/NotFound/index.tsx","sections/Login/index.tsx","sections/Login/assets/google_logo.jpg","sections/User/components/UserProfile/index.tsx","sections/User/components/UserBookings/index.tsx","sections/User/components/UserListings/index.tsx","sections/User/index.tsx","sections/Stripe/index.tsx","index.tsx"],"names":["ListingType","ListingsFilter","LOG_IN","gql","LOG_OUT","CONNECT_STRIPE","DISCONNECT_STRIPE","HOST_LISTING","CREATE_BOOKING","iconColor","displaySuccessNotification","message","description","notification","placement","style","marginTop","displayErrorMessage","error","formatListingPrice","price","round","formattedListingPrice","Math","Item","Menu","SubMenu","MenuItems","viewer","setViewer","useMutation","onCompleted","data","logOut","sessionStorage","removeItem","onError","subMenuLogin","id","title","src","avatar","to","UserOutlined","marginRight","onClick","LogoutOutlined","type","disabledOverflow","mode","selectable","className","HomeOutlined","Header","Layout","Search","Input","AppHeader","withRouter","history","location","useState","search","setSearch","useEffect","pathname","pathnameSubStrings","split","includes","length","alt","placeholder","enterButton","onSearch","value","trimmedValue","trim","push","onChange","evt","target","Title","Typography","HomeHero","size","gutter","xs","md","cover","torontoImage","dubaiImage","losAngelesImage","londonImage","ErrorBanner","banner","closable","AppHeaderSkeleton","PageSkeleton","skeletonParagraph","active","paragraph","rows","Text","ListingCard","listing","image","address","numOfGuests","hoverable","backgroundImage","level","strong","ellipsis","color","HomeListings","listings","grid","column","lg","sm","dataSource","renderItem","HomeListingsSkeleton","loading","AUTH_URL","LISTING","LISTINGS","USER","Content","Paragraph","Home","useQuery","variables","filter","PRICE_HIGH_TO_LOW","limit","page","mapBackground","result","sanFransiscoImage","cancunImage","Form","Host","imageLoading","setImageLoading","imageBase64Value","setImageBase64Value","hostListing","hasWallet","layout","onFinish","values","fullAddress","city","state","postalCode","input","onFinishFailed","label","name","rules","required","Group","Button","APARTMENT","BankOutlined","HOUSE","min","extra","maxLength","TextArea","listType","showUploadList","action","beforeUpload","beforeImageUpload","info","file","status","originFileObj","getBase64Value","LoadingOutlined","PlusOutlined","htmlType","fileIsValidImage","fileIsValidSize","img","callback","reader","FileReader","readAsDataURL","onload","Option","Select","ListingsFilters","setFilter","PRICE_LOW_TO_HIGH","ListingsPagination","total","setPage","current","defaultPageSize","hideOnSinglePage","showLessItems","ListingsSkeleton","Listings","match","locationRef","useRef","params","skip","listingsRegion","region","listingsSectionElement","offsetTop","listingsRegionElement","ListingDetails","host","EnvironmentOutlined","expandable","ListingBookings","bookingsPage","setBookingsPage","listingBookings","listingBookingsList","undefined","locale","emptyText","pagination","listingBooking","bookingHistory","checkIn","checkOut","tenant","shape","ListingCreateBooking","bookingsIndex","checkInDate","checkOutDate","setCheckInDate","setCheckOutDate","setModalVisible","bookingsIndexJSON","JSON","parse","disabledDate","currentDate","isBefore","moment","endOf","year","month","day","date","Boolean","dateIsBooked","viewerIsHost","checkInInputDisabled","checkOutInputDisabled","buttonDisabled","buttonMessage","format","newCheckInDate","showToday","disabled","onOpenChange","newCheckOutDate","dateCursor","add","verifyAndSetCheckOutDate","mark","WrappedListingCreateBookingModal","injectStripe","modalVisible","clearBookingData","handleListingRefetch","stripe","createBooking","daysBooked","diff","listingPrice","handleCreateBooking","a","createToken","stripeToken","token","source","visible","centered","footer","onCancel","KeyOutlined","hidePostalCode","Listing","refetch","bookings","listingDetailsElement","listingBookingsElement","listingCreateBookingElement","listingCreateBookingModalElement","justify","NotFound","Login","client","useApolloClient","logIn","setItem","logInData","logInLoading","logInError","logInRef","code","URL","window","href","searchParams","get","handleAuthorize","query","authUrl","tip","viewerId","logInErrorBannerElement","role","stripeAuthUrl","process","UserProfile","user","viewerIsUser","handleUserRefetch","disconnectStripe","additionalDetails","income","rel","additionalDetailsSection","contact","UserBookings","userBookings","userBookingsList","position","userBooking","UserListings","userListings","listingsPage","setListingsPage","userListingsList","userListing","User","stripeErrorBanner","console","log","userProfileElement","userListingsElement","userBookingsElement","Stripe","connectStripe","connectStripeRef","replace","ApolloClient","uri","request","operation","getItem","setContext","headers","initialViewer","didRequest","App","apiKey","exact","path","component","render","props","document","getElementById"],"mappings":"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","file":"static/js/main.3c771634.chunk.js","sourcesContent":["/* tslint:disable */\n/* eslint-disable */\n// @generated\n// This file was automatically generated and should not be edited.\n\n//==============================================================\n// START Enums and Input Objects\n//==============================================================\n\nexport enum ListingType {\n  APARTMENT = \"APARTMENT\",\n  HOUSE = \"HOUSE\",\n}\n\nexport enum ListingsFilter {\n  PRICE_HIGH_TO_LOW = \"PRICE_HIGH_TO_LOW\",\n  PRICE_LOW_TO_HIGH = \"PRICE_LOW_TO_HIGH\",\n}\n\nexport interface ConnectStripeInput {\n  code: string;\n}\n\nexport interface CreateBookingInput {\n  id: string;\n  source: string;\n  checkIn: string;\n  checkOut: string;\n}\n\nexport interface HostListingInput {\n  title: string;\n  description: string;\n  image: string;\n  type: ListingType;\n  address: string;\n  price: number;\n  numOfGuests: number;\n}\n\nexport interface LogInInput {\n  code: string;\n}\n\n//==============================================================\n// END Enums and Input Objects\n//==============================================================\n","import { gql } from 'apollo-boost';\r\n\r\nexport const LOG_IN = gql`\r\n  mutation LogIn($input: LogInInput) {\r\n    logIn(input: $input) {\r\n      id\r\n      token\r\n      avatar\r\n      hasWallet\r\n      didRequest\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const LOG_OUT = gql`\r\n  mutation LogOut {\r\n    logOut {\r\n      id\r\n      token\r\n      avatar\r\n      hasWallet\r\n      didRequest\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\nexport const CONNECT_STRIPE = gql`\r\n  mutation ConnectStripe($input: ConnectStripeInput!) {\r\n    connectStripe(input: $input) {\r\n      hasWallet\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\nexport const DISCONNECT_STRIPE = gql`\r\n  mutation DisconnectStripe {\r\n    disconnectStripe {\r\n      hasWallet\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const HOST_LISTING = gql`\r\n  mutation HostListing($input: HostListingInput!) {\r\n    hostListing(input: $input) {\r\n      id\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const CREATE_BOOKING = gql`\r\n  mutation CreateBooking($input: CreateBookingInput!) {\r\n    createBooking(input: $input) {\r\n      id\r\n    }\r\n  }\r\n`;","import { message, notification } from \"antd\";\r\n\r\nexport const iconColor = '#1890ff';\r\n\r\nexport const displaySuccessNotification = (message: string, description?: string) => {\r\n  return notification[\"success\"]({\r\n    message,\r\n    description,\r\n    placement: \"topLeft\",\r\n    style: {\r\n      marginTop: 50\r\n    }\r\n  })\r\n}\r\n\r\nexport const displayErrorMessage = (error: string) => {\r\n  return message.error(error);\r\n}\r\n\r\nexport const formatListingPrice = (price: number, round = true) => {\r\n  const formattedListingPrice = round ? Math.round(price / 100) : price / 100;\r\n  return `$${formattedListingPrice}`;\r\n}","import { Button, Menu, Avatar } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { Viewer } from \"../../../../lib/types\";\r\nimport { HomeOutlined, UserOutlined, LogoutOutlined } from '@ant-design/icons';\r\nimport { LogOut as LogOutData } from \"../../../../lib/graphql/mutations/LogOut/__generated__/LogOut\";\r\nimport { LOG_OUT } from \"../../../../lib/graphql/mutations\";\r\nimport { displaySuccessNotification, displayErrorMessage } from \"../../../../lib/utils\";\r\n\r\nconst { Item, SubMenu } = Menu;\r\ninterface Props {\r\n  viewer: Viewer;\r\n  setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nexport const MenuItems = ({ viewer, setViewer }: Props) => {\r\n  const [logOut] = useMutation<LogOutData>(LOG_OUT, {\r\n    onCompleted: (data) => {\r\n      if (data && data.logOut) {\r\n        setViewer(data.logOut);\r\n        sessionStorage.removeItem(\"token\");\r\n        displaySuccessNotification(\"You've successfully logged out!\");\r\n      }\r\n    },\r\n    onError: () => {\r\n      displayErrorMessage(\"Sorry! We weren't able to log you out. Please try again later!\");\r\n    }\r\n  });\r\n\r\n  const handleLogOut = () => {\r\n    logOut();\r\n  };\r\n  \r\n  const subMenuLogin = viewer.id ? (\r\n    <SubMenu title={<Avatar src={viewer.avatar}/>} key=\"/logged-in\" >\r\n      <Item key=\"/user\">\r\n        <Link to={`/user/${viewer.id}`} >\r\n          <UserOutlined style={{marginRight: '8px'}}/>\r\n          Profile\r\n        </Link>\r\n      </Item>\r\n      <Item key=\"/logout\">\r\n        <div onClick={handleLogOut}>\r\n          <LogoutOutlined style={{marginRight: '8px'}}/>\r\n          Logout\r\n        </div>\r\n      </Item>\r\n    </SubMenu>\r\n  ) : (\r\n    <Item key=\"/login\">\r\n      <Link to=\"/login\">\r\n        <Button type=\"primary\" >Sign In</Button>\r\n      </Link>\r\n    </Item>\r\n  );\r\n\r\n  return (\r\n    <Menu disabledOverflow={true} mode=\"horizontal\" selectable={false} className=\"menu\" >\r\n      <Item key=\"/host\">\r\n        <Link to=\"/host\">\r\n          <HomeOutlined style={{marginRight: '8px'}}/>\r\n          Host\r\n        </Link>\r\n      </Item>\r\n      {subMenuLogin}\r\n    </Menu>\r\n  );\r\n}","import { useState, useEffect } from \"react\";\r\nimport { Link, withRouter, RouteComponentProps } from \"react-router-dom\";\r\nimport { Layout, Input } from \"antd\";\r\nimport { Viewer } from \"../../lib/types\";\r\nimport { MenuItems } from \"./components\";\r\n\r\nimport logo from './assets/tinyhouse-logo.png';\r\nimport { displayErrorMessage } from \"../../lib/utils\";\r\n\r\ninterface Props {\r\n  viewer: Viewer;\r\n  setViewer: (viewer: Viewer) => void;\r\n}\r\nconst { Header } = Layout;\r\nconst { Search } = Input;\r\n\r\nexport const AppHeader = withRouter(\r\n  ({ viewer, setViewer, history, location }: Props & RouteComponentProps) => {\r\n    const [search, setSearch] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n      const { pathname } = location;\r\n      const pathnameSubStrings = pathname.split(\"/\");\r\n\r\n      if (!pathname.includes(\"/listings\")) {\r\n        setSearch(\"\");\r\n        return;\r\n      }\r\n      \r\n      if (pathname.includes(\"/listings\") && pathnameSubStrings.length === 3) {\r\n        setSearch(pathnameSubStrings[2]);\r\n        return;\r\n      }\r\n    }, [location])\r\n\r\n    const onSearch = (value: string) => {\r\n      const trimmedValue = value.trim();\r\n\r\n      if (trimmedValue) {\r\n        history.push(`/listings/${trimmedValue}`)\r\n      } else {\r\n        displayErrorMessage(\"Please enter a valid search!\");\r\n      } \r\n    }\r\n\r\n    return (\r\n      <Header className=\"app-header\">\r\n        <div className=\"app-header__logo-search-section\">\r\n          <div className=\"app-header__logo\">\r\n            <Link to=\"/\">\r\n              <img src={logo} alt=\"App logo\" />\r\n            </Link>\r\n          </div>\r\n          <div className=\"app-header__search-input\">\r\n            <Search\r\n              placeholder=\"Search 'San Francisco'\"\r\n              enterButton\r\n              onSearch={onSearch}\r\n              value={search}\r\n              onChange={evt => setSearch(evt.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"app-header__menu-section\">\r\n          <MenuItems viewer={viewer} setViewer={setViewer} />\r\n        </div>\r\n      </Header>\r\n    )\r\n  }\r\n)","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABICAYAAACp+JiNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKtSURBVHgB7ZvPcdNAFMa/ZTjkhm/JLaYDUgFJBeAKCBUgVUCowKICSAemAlyCO8hySgwXc0ouZPn22WLEv4xs7W5g5vvNOJpV5Iz10763Ty+yO2hCQDrmV5U7QWb4mS+4GSMN/gEEJAGSYEgCJMGQBEiCIQmQBEMSIAmGJEASDEmAJBiSAEkwJAGSYEgCJMGQBEiCIQmQBOMh0jI+mIZTZIb/Mhs5pCO5BDi8Q2ZSCogoHCAJhiRAEgxJgCQYkgBJMCQBkmBIAiTBkARIgnGfEuZsDLz8FnAUtxx73BOp+wm9cAH1Ze2azq4FmzFz5zBlw+Q5ClN+JvCq/yLAuKqdv+bv2DCZoTDFJPAKr/jjhCf7/m/HrGq3uqzchDPlLQpSSoK/XQuY9zmYM6WisDcoRAkJPs6AL7VbbPMmCjsrJSKrBMb3YhMCHjsQRXAGTSyUMpJPQsD59QABLZ9rN4uhhIxLaBYJgYmNJ38aEx0SYKGUUUR6CYzjZUxsibEZlUlEUgmxCLKEloko4oYVZoi5JiFJJGxqgD8WQamJIbas3FHKWiJF2RxrgEmfJXA0DaM9btrxDc8pnhRL5nH3uD7JNNYSfN+KS9BrDGToTNiqBqCAhh/6on1xvM4dDh+7+3lyx33+Xgw9JuEaAxkiwSPBEjgUJuHG7kQHJMydJbj1MujxDxBn4u2AGbFzTggOr/abcEgZXzu7/V03SDGBus4V61SCHlsQn4HYPKMwYvgccteY4yfYEaevCcMXbarYUywOT9sxp/CHWBbvT0PDhsqjHwey4CoZaqU7S8d8vWgHTEifuJlRwDP8fGXPUbDdpkYrJMEoGg6sEKu9gLPO2FaHeNfpOpUkCneei0rY3Fr/dnu9LHDPcRcKB0iCIQmQBEMSEFeHgMf431j3GpPxHWSq7xBvwxLFAAAAAElFTkSuQmCC\"","export default __webpack_public_path__ + \"static/media/dubai.a6c56bca.jpg\";","export default __webpack_public_path__ + \"static/media/london.16fb9b9d.jpg\";","export default __webpack_public_path__ + \"static/media/los-angeles.44220702.jpg\";","export default __webpack_public_path__ + \"static/media/toronto.5c221cf7.jpg\";","import { Card, Col, Input, Row, Typography } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport dubaiImage from \"../../assets/dubai.jpg\";\r\nimport londonImage from \"../../assets/london.jpg\";\r\nimport losAngelesImage from \"../../assets/los-angeles.jpg\";\r\nimport torontoImage from \"../../assets/toronto.jpg\";\r\n\r\nconst { Title } = Typography;\r\nconst { Search } = Input;\r\n\r\ninterface Props {\r\n  onSearch: (value: string) => void;\r\n}\r\n\r\nexport const HomeHero = ({ onSearch }: Props) => {\r\n  return (\r\n    <div className=\"home-hero\">\r\n      <div className=\"home-hero__search\">\r\n        <Title className=\"home-hero__title\">Find a place you'll love to stay at</Title>\r\n        <Search\r\n          placeholder=\"Search 'San Francisco'\"\r\n          size=\"large\"\r\n          enterButton\r\n          className=\"home-hero__search-input\"\r\n          onSearch={onSearch}\r\n        />\r\n      </div>\r\n      <Row gutter={12} className=\"home-hero__cards\">\r\n        <Col xs={12} md={6}>\r\n          <Link to=\"listings/toronto\">\r\n            <Card cover={<img src={torontoImage} alt=\"Toronto\" />}>\r\n            Toronto\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={12} md={6}>\r\n          <Link to=\"listings/dubai\">\r\n            <Card cover={<img src={dubaiImage} alt=\"Dubai\" />}>\r\n              Dubai\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={0} md={6}>\r\n          <Link to=\"listings/los%20angeles\">\r\n            <Card cover={<img src={losAngelesImage} alt=\"Los Angeles\" />}>\r\n              Los Angeles\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n        <Col xs={0} md={6}>\r\n          <Link to=\"listings/london\">\r\n            <Card cover={<img src={londonImage} alt=\"London\" />}>\r\n              London\r\n            </Card>\r\n          </Link>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};","import { Alert } from \"antd\";\r\n\r\ninterface Props {\r\n  message?: string;\r\n  description?: string;\r\n}\r\n\r\nexport const ErrorBanner = ({\r\n  message = \"Uh oh! Something went wrong :(\",\r\n  description = \"Look like something went wrong. Please check your connection and/or try again later.\"\r\n}: Props) => {\r\n  return (\r\n    <Alert\r\n      banner\r\n      closable\r\n      message={message}\r\n      description={description}\r\n      type=\"error\"\r\n      className=\"error-banner\"\r\n    />\r\n  );\r\n}","import { Layout } from \"antd\";\r\n\r\nimport logo from './assets/tinyhouse-logo.png';\r\n\r\nconst { Header } = Layout;\r\n\r\nexport const AppHeaderSkeleton = () => {\r\n  return (\r\n    <Header className=\"app-header\">\r\n      <div className=\"app-header__logo-search-section\">\r\n        <div className=\"app-header__logo\">\r\n          <img src={logo} alt=\"App logo\" />\r\n        </div>\r\n      </div>\r\n    </Header>\r\n  );\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABICAYAAACp+JiNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKtSURBVHgB7ZvPcdNAFMa/ZTjkhm/JLaYDUgFJBeAKCBUgVUCowKICSAemAlyCO8hySgwXc0ouZPn22WLEv4xs7W5g5vvNOJpV5Iz10763Ty+yO2hCQDrmV5U7QWb4mS+4GSMN/gEEJAGSYEgCJMGQBEiCIQmQBEMSIAmGJEASDEmAJBiSAEkwJAGSYEgCJMGQBEiCIQmQBOMh0jI+mIZTZIb/Mhs5pCO5BDi8Q2ZSCogoHCAJhiRAEgxJgCQYkgBJMCQBkmBIAiTBkARIgnGfEuZsDLz8FnAUtxx73BOp+wm9cAH1Ze2azq4FmzFz5zBlw+Q5ClN+JvCq/yLAuKqdv+bv2DCZoTDFJPAKr/jjhCf7/m/HrGq3uqzchDPlLQpSSoK/XQuY9zmYM6WisDcoRAkJPs6AL7VbbPMmCjsrJSKrBMb3YhMCHjsQRXAGTSyUMpJPQsD59QABLZ9rN4uhhIxLaBYJgYmNJ38aEx0SYKGUUUR6CYzjZUxsibEZlUlEUgmxCLKEloko4oYVZoi5JiFJJGxqgD8WQamJIbas3FHKWiJF2RxrgEmfJXA0DaM9btrxDc8pnhRL5nH3uD7JNNYSfN+KS9BrDGToTNiqBqCAhh/6on1xvM4dDh+7+3lyx33+Xgw9JuEaAxkiwSPBEjgUJuHG7kQHJMydJbj1MujxDxBn4u2AGbFzTggOr/abcEgZXzu7/V03SDGBus4V61SCHlsQn4HYPKMwYvgccteY4yfYEaevCcMXbarYUywOT9sxp/CHWBbvT0PDhsqjHwey4CoZaqU7S8d8vWgHTEifuJlRwDP8fGXPUbDdpkYrJMEoGg6sEKu9gLPO2FaHeNfpOpUkCneei0rY3Fr/dnu9LHDPcRcKB0iCIQmQBEMSEFeHgMf431j3GpPxHWSq7xBvwxLFAAAAAElFTkSuQmCC\"","import { Fragment } from \"react\";\r\nimport { Skeleton } from \"antd\";\r\n\r\nexport const PageSkeleton = () => {\r\n  const skeletonParagraph = (\r\n    <Skeleton\r\n      active\r\n      paragraph={{ rows: 4 }}\r\n      className=\"page-skeleton__paragraph\"\r\n    />\r\n  )\r\n\r\n  return (\r\n    <Fragment>\r\n      {skeletonParagraph}\r\n      {skeletonParagraph}\r\n      {skeletonParagraph}\r\n    </Fragment>\r\n  );\r\n}","import { Link } from \"react-router-dom\";\r\nimport { Card, Typography } from \"antd\";\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { iconColor, formatListingPrice } from '../../utils/index'\r\n\r\ninterface Props {\r\n  listing: {\r\n    id: string;\r\n    title: string;\r\n    image: string;\r\n    address: string;\r\n    price: number;\r\n    numOfGuests: number;\r\n  }\r\n}\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nexport const ListingCard = ({listing} : Props) => {\r\n  const { id, title, image, address, price, numOfGuests } = listing;\r\n  \r\n  return (\r\n    <Link to={`/listing/${id}`}>\r\n      <Card\r\n        hoverable\r\n        cover={\r\n          <div\r\n            style={{ backgroundImage: `url(${image})` }}\r\n            className=\"listing-card__cover-img\"\r\n          />\r\n        }\r\n      >\r\n        <div className=\"listing-card__details\">\r\n          <div className=\"listing-card__description\">\r\n            <Title level={4} className=\"listing-card__price\">\r\n              {formatListingPrice(price)}\r\n              <span>/day</span>\r\n            </Title>\r\n            <Text strong ellipsis className=\"listing-card__address\">\r\n              {title}\r\n            </Text>\r\n            <Text ellipsis className=\"listing-card__location\">\r\n              {address}\r\n            </Text>\r\n          </div>\r\n          <div className=\"listing-card__dimensions listing-card__dimensions--guests\">\r\n            <UserOutlined style={{ marginRight: '4px', color: iconColor }}/>\r\n            <Text>{numOfGuests} guests</Text>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </Link>\r\n    \r\n  );\r\n}","import { List, Typography } from 'antd';\r\nimport { ListingCard } from '../../../../lib/components';\r\nimport { Listings } from '../../../../lib/graphql/queries/Listings/__generated__/Listings';\r\n\r\ninterface Props {\r\n  title: string;\r\n  listings: Listings[\"listings\"][\"result\"]\r\n}\r\n\r\nconst { Title } = Typography;\r\n\r\nexport const HomeListings = ({ title, listings }: Props) => {\r\n  return (\r\n    <div className=\"home-listings\">\r\n      <Title level={4} className=\"home-listings__title\">\r\n        { title }\r\n      </Title>\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          lg: 4,\r\n          sm: 2,\r\n          xs: 1,\r\n        }}\r\n        dataSource={listings}\r\n        renderItem={listing => (\r\n          <List.Item>\r\n            <ListingCard listing={listing} />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}","import { List, Card, Skeleton } from 'antd';\r\n\r\nimport listingLoadingCardCover from '../../assets/listing-loading-card-cover.jpg';\r\n\r\nexport const HomeListingsSkeleton = () => {\r\n  const emptyData = [{}, {}, {}, {}];\r\n  return (\r\n    <div className=\"home-listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 0 }} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          lg: 4,\r\n          sm: 2,\r\n          xs: 1,\r\n        }}\r\n        dataSource={emptyData}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card\r\n              cover={\r\n                <div\r\n                  style={{ backgroundImage: `url(${listingLoadingCardCover})` }}\r\n                  className=\"home-listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading\r\n              className=\"home-listings-skeleton__card\"\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}","export default \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","import { gql } from 'apollo-boost';\r\n\r\nexport const AUTH_URL = gql`\r\n  query AuthUrl {\r\n    authUrl\r\n  }\r\n`;","import { gql } from \"apollo-boost\";\r\n\r\nexport const LISTING = gql`\r\n  query Listing($id: ID!, $bookingsPage: Int!, $limit: Int!) {\r\n    listing(id: $id) {\r\n      id\r\n      title\r\n      description\r\n      image\r\n      host {\r\n        id\r\n        name\r\n        avatar\r\n        hasWallet\r\n      }\r\n      type\r\n      address\r\n      city\r\n      bookings(limit: $limit, page: $bookingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          tenant {\r\n            id\r\n            name\r\n            avatar\r\n          }\r\n          checkIn\r\n          checkOut\r\n        }\r\n      }\r\n      bookingsIndex\r\n      price\r\n      numOfGuests\r\n    }\r\n  }\r\n`;\r\n","import { gql } from 'apollo-boost';\r\n\r\nexport const LISTINGS = gql`\r\n  query Listings($location: String, $filter: ListingsFilter!, $limit: Int!, $page: Int!) {\r\n    listings(location: $location, filter: $filter, limit: $limit, page: $page) {\r\n      total\r\n      region\r\n      result {\r\n        id\r\n        title\r\n        image\r\n        address\r\n        price\r\n        numOfGuests\r\n      }\r\n    }\r\n  }\r\n`;","import { gql } from 'apollo-boost';\r\n\r\nexport const USER = gql`\r\n  query User($id: ID!, $bookingsPage: Int!, $listingsPage: Int!, $limit: Int!) {\r\n    user(id: $id) {\r\n      id\r\n      name\r\n      avatar\r\n      contact\r\n      hasWallet\r\n      income\r\n      bookings(limit: $limit, page: $bookingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          listing {\r\n            id\r\n            title\r\n            image\r\n            address\r\n            price\r\n            numOfGuests\r\n          }\r\n          checkIn\r\n          checkOut\r\n        }\r\n      }\r\n      listings(limit: $limit, page: $listingsPage) {\r\n        total\r\n        result {\r\n          id\r\n          title\r\n          image\r\n          address\r\n          price\r\n          numOfGuests\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;","export default __webpack_public_path__ + \"static/media/map-background.c8201cdd.jpg\";","export default __webpack_public_path__ + \"static/media/san-fransisco.bc8599ab.jpg\";","export default __webpack_public_path__ + \"static/media/cancun.7009e472.jpg\";","import { Col, Layout, Row, Typography } from 'antd';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { ListingsFilter } from \"../../lib/graphql/globalTypes\";\r\nimport { Listings as ListingsData, ListingsVariables } from '../../lib/graphql/queries/Listings/__generated__/Listings';\r\nimport { Link, RouteComponentProps } from 'react-router-dom';\r\nimport { displayErrorMessage } from '../../lib/utils';\r\nimport { HomeHero, HomeListings, HomeListingsSkeleton } from './components';\r\nimport { LISTINGS } from '../../lib/graphql/queries';\r\n\r\nimport mapBackground from './assets/map-background.jpg';\r\nimport sanFransiscoImage from './assets/san-fransisco.jpg';\r\nimport cancunImage from './assets/cancun.jpg';\r\n\r\nconst { Content } = Layout;\r\nconst { Paragraph, Title } = Typography;\r\n\r\nconst PAGE_LIMIT = 4;\r\nexport const Home = ({ history }: RouteComponentProps) => {\r\n  const { data, loading } = useQuery<ListingsData, ListingsVariables>(LISTINGS, {\r\n    variables: {\r\n      filter: ListingsFilter.PRICE_HIGH_TO_LOW,\r\n      limit: PAGE_LIMIT,\r\n      page: 1\r\n    }\r\n  });\r\n\r\n  const onSearch = (value: String) => {\r\n    const trimmedValue = value.trim();\r\n\r\n    if (trimmedValue) {\r\n      history.push(`/listings/${trimmedValue}`);\r\n    } else {\r\n      displayErrorMessage(\"Plase enter a valid search!\");\r\n    }\r\n\r\n  }\r\n\r\n  const renderListingSection = () => {\r\n    if (loading) {\r\n      return <HomeListingsSkeleton />;\r\n    }\r\n\r\n    if (data) {\r\n      return (\r\n        <HomeListings title=\"Premium Listings\" listings={data.listings.result}/>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <Content\r\n      className=\"home\"\r\n      style={{ backgroundImage: `url(${mapBackground})` }}\r\n    >\r\n      <HomeHero onSearch={onSearch} />\r\n\r\n      <div className=\"home__cta-section\">\r\n        <Title level={2} className=\"home__cta-section-title\">\r\n          Your guide for all things rental\r\n        </Title>\r\n        <Paragraph>\r\n          Helping you make the best decisions in renting your last minute locations.\r\n        </Paragraph>\r\n        <Link\r\n          className=\"ant-btn ant-btn-primary ant-btn-lg home__cta-section-button\"\r\n          to=\"/listings/united%20states\"\r\n        >\r\n          Popular listings in the United States\r\n        </Link>\r\n      </div>\r\n\r\n      {renderListingSection()}\r\n\r\n      <div className=\"home__listings\">\r\n        <Title level={4} className=\"home__listings-title\">\r\n          Listings of any kind\r\n        </Title>\r\n        <Row gutter={12}>\r\n          <Col xs={24} sm={12}>\r\n            <Link to=\"listings/san%20fransisco\">\r\n              <div className=\"home__listings-img-cover\">\r\n                <img src={sanFransiscoImage} alt=\"San Fransisco\" className=\"home__listings-img\"/>\r\n              </div>\r\n            </Link>\r\n          </Col>\r\n          <Col xs={24} sm={12}>\r\n            <Link to=\"listings/cancún\">\r\n              <div className=\"home__listings-img-cover\">\r\n                <img src={cancunImage} alt=\"Cancun\" className=\"home__listings-img\"/>\r\n              </div>\r\n            </Link>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </Content>\r\n  );\r\n}","import { BankOutlined, HomeOutlined, LoadingOutlined, PlusOutlined } from \"@ant-design/icons\";\r\nimport { Form, Layout, Typography, Input, InputNumber, Radio, Upload, Button } from \"antd\";\r\nimport { UploadChangeParam } from \"antd/lib/upload\";\r\nimport { useState } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { ListingType } from \"../../lib/graphql/globalTypes\";\r\nimport { Viewer } from \"../../lib/types\";\r\nimport { displayErrorMessage, displaySuccessNotification, iconColor } from \"../../lib/utils\";\r\nimport { HOST_LISTING } from '../../lib/graphql/mutations/HostListing';\r\nimport { HostListing as HostListingData, HostListingVariables } from \"../../lib/graphql/mutations/HostListing/__generated__/HostListing\";\r\nimport { useMutation } from 'react-apollo';\r\n\r\nconst { Content } = Layout;\r\nconst { Text, Title } = Typography;\r\nconst { Item } = Form;\r\n\r\ninterface Props {\r\n  viewer: Viewer;\r\n}\r\n\r\nexport const Host = ({ viewer }: Props) => {\r\n  const [imageLoading, setImageLoading] = useState(false);\r\n  const [imageBase64Value, setImageBase64Value] = useState<string | null>(null);\r\n  const [hostListing, { loading, data }] = useMutation<\r\n    HostListingData,\r\n    HostListingVariables\r\n    >(HOST_LISTING, {\r\n      onError: () => {\r\n        displayErrorMessage(\"Sorry! We weren't able to create your listing. Please try again later.\")\r\n      },\r\n      onCompleted: () => {\r\n        displaySuccessNotification(\"You've succesfully created your listing!\");\r\n      }\r\n  });\r\n  \r\n  const handleImageUpload = (info: UploadChangeParam) => {\r\n    const { file } = info;\r\n\r\n    if (file.status === 'uploading') {\r\n      setImageLoading(true);\r\n      return;\r\n    }\r\n    if (file.status === 'done' && file.originFileObj) {\r\n      getBase64Value(\r\n        file.originFileObj,\r\n        imageBase64Value => {\r\n          setImageBase64Value(imageBase64Value);\r\n          setImageLoading(false);\r\n        }\r\n      );\r\n    } \r\n  };\r\n\r\n  const handleHostListing = (values: any) => {\r\n    const fullAddress = `${values.address}, ${values.city}, ${values.state}, ${values.postalCode}`;\r\n    const input = {\r\n      ...values,\r\n      address: fullAddress,\r\n      image: imageBase64Value,\r\n      price: values.price * 100\r\n    };\r\n    delete input.city;\r\n    delete input.state;\r\n    delete input.postalCode;\r\n\r\n    hostListing({\r\n      variables: {\r\n        input\r\n      }\r\n    })\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"host-content\">\r\n        <div className=\"host__form-header\">\r\n          <Title level={3} className=\"host__form-title\">\r\n            Plase wait!\r\n          </Title>\r\n          <Text type=\"secondary\">\r\n            We're creating your listing now.\r\n          </Text>\r\n        </div>\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (data && data.hostListing) {\r\n    return (\r\n      <Redirect to={`/listing/${data.hostListing.id}`} />\r\n    );\r\n  }\r\n\r\n  if (!viewer.id || !viewer.hasWallet) {\r\n    return (\r\n      <Content className=\"host-content\">\r\n        <div className=\"host__form-header\">\r\n          <Title level={3} className=\"host__form-title\">\r\n            You'll have to be signed in and connected with Stripe to host a listing!\r\n          </Title>\r\n          <Text type=\"secondary\">\r\n            We only allow users who've signed in to our application and have connected with Stripe to host new listings.\r\n            You can sign in at the <Link to=\"/login\">/login</Link> page and connect with Stripe shortly after.\r\n          </Text>\r\n        </div>\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Content className=\"host-content\">\r\n      <Form\r\n        layout=\"vertical\"\r\n        onFinish={handleHostListing}\r\n        onFinishFailed={() => displayErrorMessage(\"Plase complete all required form fields!\")}\r\n      >\r\n        <div className=\"host__form-header\">\r\n          <Title level={3} className=\"host__form-title\">\r\n            Hi! Let's get started listing your place.\r\n          </Title>\r\n          <Text type=\"secondary\">\r\n            In this form we'll collect some basic and additional information about your listing.\r\n          </Text>\r\n        </div>\r\n\r\n        <Item label=\"Home Type\" name=\"type\" rules={[{\r\n          required: true,\r\n          message: \"Please select a home type!\"\r\n        }]} >\r\n          <Radio.Group>\r\n            <Radio.Button value={ListingType.APARTMENT}>\r\n              <BankOutlined style={{color: iconColor, marginRight: 4 }} /><span>Apartment</span>\r\n            </Radio.Button>\r\n            <Radio.Button value={ListingType.HOUSE}>\r\n              <HomeOutlined style={{color: iconColor, marginRight: 4}} /><span>House</span>\r\n            </Radio.Button>\r\n          </Radio.Group>\r\n        </Item>\r\n\r\n        <Item\r\n          label=\"Max # of Guests\"\r\n          name=\"numOfGuests\"\r\n          rules={[{\r\n            required: true,\r\n            message: \"Please enter a max number of guests!\"\r\n          }]}>\r\n          <InputNumber min={1} placeholder=\"4\" />\r\n        </Item>\r\n\r\n        <Item\r\n          label=\"Title\"\r\n          extra=\"Max character count of 45\"\r\n          name=\"title\"\r\n          rules={[{\r\n            required: true,\r\n            message: \"Please enter a title for your listing!\"\r\n          }]}>\r\n          <Input maxLength={45} placeholder=\"The iconic and luxurious Bel-Air mansion\" />\r\n        </Item>\r\n\r\n        <Item\r\n          label=\"Description of listing\"\r\n          extra=\"Max character count of 400\"\r\n          name=\"description\"\r\n          rules={[{\r\n            required: true,\r\n            message: \"Please select a description for your listing!\"\r\n          }]}>\r\n          <Input.TextArea\r\n            rows={3}\r\n            maxLength={400}\r\n            placeholder=\"Modern, clean and iconic home of the Fresh Prince. Situated in the hearth of Bel-Air, Los Angeles.\" />\r\n        </Item>\r\n\r\n        <Item label=\"Address\" name=\"address\" rules={[{\r\n          required: true,\r\n          message: \"Please enter an address for your listing!\"\r\n        }]}>\r\n          <Input placeholder=\"251 North Bristol Avenue\" />\r\n        </Item>\r\n\r\n        <Item label=\"City/Town\" name=\"city\" rules={[{\r\n          required: true,\r\n          message: \"Please enter a city for your listing!\"\r\n        }]}>\r\n          <Input placeholder=\"Los Angeles\" />\r\n        </Item>\r\n\r\n        <Item label=\"State/Province\" name=\"state\" rules={[{\r\n          required: true,\r\n          message: \"Please enter a state for your listing!\"\r\n        }]}>\r\n          <Input placeholder=\"California\" />\r\n        </Item>\r\n\r\n        <Item label=\"Zip/Postal Code\" name=\"postalCode\" rules={[{\r\n          required: true,\r\n          message: \"Please enter a zip code for your listing!\"\r\n        }]}>\r\n          <Input placeholder=\"Please enter a zip code for your listing!\" />\r\n        </Item>\r\n\r\n        <Item\r\n          label=\"Image\"\r\n          extra=\"Images have to be under 1MB in sieze and of type JPG or PNG\"\r\n          name=\"image\"\r\n          rules={[{\r\n            required: true,\r\n            message: \"Please provide an image for your listing!\"\r\n          }]}\r\n        >\r\n          <div className=\"host__form-image-upload\">\r\n            <Upload\r\n              name=\"image\"\r\n              listType=\"picture-card\"\r\n              showUploadList={false}\r\n              action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n              beforeUpload={beforeImageUpload}\r\n              onChange={handleImageUpload}\r\n            >\r\n              {imageBase64Value ? (\r\n                <img src={imageBase64Value} alt=\"Listing\" />\r\n              ) : (\r\n                  <div>\r\n                    { imageLoading ? <LoadingOutlined /> : <PlusOutlined /> }\r\n                    <div className=\"ant-upload-text\">Upload</div>\r\n                  </div>\r\n              )}\r\n            </Upload>\r\n          </div>\r\n        </Item>\r\n\r\n        <Item label=\"Price\" extra=\"All prices in $USD/day\" name=\"price\" rules={[{\r\n          required: true,\r\n          message: \"Please enter a price for your listing!\"\r\n        }]}>\r\n          <InputNumber min={0} placeholder=\"120\" />\r\n        </Item>\r\n        \r\n        <Item>\r\n          <Button type=\"primary\" htmlType=\"submit\">Submit</Button>\r\n        </Item>\r\n      </Form>\r\n    </Content>\r\n  );\r\n}\r\n\r\nconst beforeImageUpload = (file: File) => {\r\n  const fileIsValidImage = file.type === 'image/jpeg' || \"image/png\";\r\n  const fileIsValidSize = file.size / 1024 / 1024 < 1;\r\n\r\n  if (!fileIsValidImage) {\r\n    displayErrorMessage(\"You're only able to upload valid JPG or PNG files!\");\r\n    return false;\r\n  }\r\n  if (!fileIsValidSize) {\r\n    displayErrorMessage(\"You're only able to upload valid image files of under 1MB in size!\");\r\n    return false;\r\n  }\r\n\r\n  return fileIsValidImage && fileIsValidSize;\r\n}\r\n\r\nconst getBase64Value = (\r\n  img: File | Blob,\r\n  callback: (imageBase64value: string) => void\r\n) => {\r\n  const reader = new FileReader();\r\n  reader.readAsDataURL(img);\r\n  reader.onload = () => {\r\n    callback(reader.result as string);\r\n  }\r\n}","import { Select } from 'antd';\r\nimport { ListingsFilter } from '../../../../lib/graphql/globalTypes';\r\n\r\ninterface Props {\r\n  filter: ListingsFilter;\r\n  setFilter: (filter: ListingsFilter) => void;\r\n}\r\n\r\nconst { Option } = Select;\r\n\r\nexport const ListingsFilters = ({ filter, setFilter }: Props) => {\r\n  return (\r\n    <div className=\"listings-filters\">\r\n      <span>Filter By</span>\r\n      <Select value={filter} onChange={(filter: ListingsFilter) => setFilter(filter)}>\r\n        <Option value={ListingsFilter.PRICE_LOW_TO_HIGH}>Price: Low to High</Option>\r\n        <Option value={ListingsFilter.PRICE_HIGH_TO_LOW}>Price: High to Low</Option>\r\n      </Select>\r\n    </div>\r\n  );\r\n}","import { Pagination } from \"antd\"\r\n\r\ninterface Props {\r\n  total: number;\r\n  page: number;\r\n  limit: number;\r\n  setPage: (page: number) => void;\r\n}\r\n\r\nexport const ListingsPagination = ({ total, page, limit, setPage }: Props) => {\r\n  return (\r\n    <Pagination\r\n      current={page}\r\n      total={total}\r\n      defaultPageSize={limit}\r\n      hideOnSinglePage\r\n      showLessItems\r\n      onChange={(page: number) => {\r\n        setPage(page)\r\n      }}\r\n      className=\"listings-pagination\"\r\n    />\r\n  );\r\n}","import { List, Card, Skeleton } from 'antd';\r\n\r\nimport listingLoadingCardCover from '../../assets/listing-loading-card-cover.jpg';\r\n\r\nexport const ListingsSkeleton = () => {\r\n  const emptyData = [{}, {}, {}, {}, {}, {}, {}, {}];\r\n  return (\r\n    <div className=\"listings-skeleton\">\r\n      <Skeleton paragraph={{ rows: 1 }} />\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          lg: 4,\r\n          sm: 2,\r\n          xs: 1,\r\n        }}\r\n        dataSource={emptyData}\r\n        renderItem={() => (\r\n          <List.Item>\r\n            <Card\r\n              cover={\r\n                <div\r\n                  style={{ backgroundImage: `url(${listingLoadingCardCover})` }}\r\n                  className=\"listings-skeleton__card-cover-img\"\r\n                ></div>\r\n              }\r\n              loading\r\n              className=\"listings-skeleton__card\"\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}","export default \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAoEAAAGsCAYAAACiiX3NAAABYWlDQ1BrQ0dDb2xvclNwYWNlRGlzcGxheVAzAAAokWNgYFJJLCjIYWFgYMjNKykKcndSiIiMUmB/yMAOhLwMYgwKicnFBY4BAT5AJQwwGhV8u8bACKIv64LMOiU1tUm1XsDXYqbw1YuvRJsw1aMArpTU4mQg/QeIU5MLikoYGBhTgGzl8pICELsDyBYpAjoKyJ4DYqdD2BtA7CQI+whYTUiQM5B9A8hWSM5IBJrB+API1klCEk9HYkPtBQFul8zigpzESoUAYwKuJQOUpFaUgGjn/ILKosz0jBIFR2AopSp45iXr6SgYGRiaMzCAwhyi+nMgOCwZxc4gxJrvMzDY7v////9uhJjXfgaGjUCdXDsRYhoWDAyC3AwMJ3YWJBYlgoWYgZgpLY2B4dNyBgbeSAYG4QtAPdHFacZGYHlGHicGBtZ7//9/VmNgYJ/MwPB3wv//vxf9//93MVDzHQaGA3kAFSFl7jXH0fsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAABcgSURBVHgB7daxDYAwEARBm9yI/qtEUIARdex8BzuX/BiOAAECBAgQIEAgJzD/4vt5d65cMAECBAgQIEAgKnCdax7RdtkECBAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAIG0gCcwPb94AgQIECBAoCrgCawur5sAAQIECBBIC3gC0/OLJ0CAAAECBKoCnsDq8roJECBAgACBtIAnMD2/eAIECBAgQKAq4AmsLq+bAAECBAgQSAt4AtPziydAgAABAgSqAp7A6vK6CRAgQIAAgbSAJzA9v3gCBAgQIECgKuAJrC6vmwABAgQIEEgLeALT84snQIAAAQIEqgKewOryugkQIECAAAECBAgQIECAAAECBFoCH+giB1TBDI5HAAAAAElFTkSuQmCC\"","import { useState, useEffect, useRef } from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { Layout, List, Typography, Affix } from \"antd\";\r\nimport { ListingCard, ErrorBanner } from \"../../lib/components\";\r\nimport { LISTINGS } from \"../../lib/graphql/queries\";\r\nimport { Listings as ListingsData, ListingsVariables } from \"../../lib/graphql/queries/Listings/__generated__/Listings\";\r\nimport { ListingsFilter } from \"../../lib/graphql/globalTypes\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { ListingsFilters, ListingsPagination, ListingsSkeleton } from './components';\r\n\r\ninterface MatchParams {\r\n  location: string;\r\n}\r\nconst { Content } = Layout;\r\nconst { Title, Paragraph, Text } = Typography;\r\n\r\nconst PAGE_LIMIT = 8;\r\n\r\nexport const Listings = ({ match }: RouteComponentProps<MatchParams>) => {\r\n  const locationRef = useRef(match.params.location);\r\n  const [filter, setFilter] = useState(ListingsFilter.PRICE_LOW_TO_HIGH);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const { loading, data, error } = useQuery<ListingsData, ListingsVariables>(LISTINGS, {\r\n    skip: locationRef.current !== match.params.location && page !== 1,\r\n    variables: {\r\n      location: match.params.location,\r\n      filter,\r\n      limit: PAGE_LIMIT,\r\n      page\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    setPage(1);\r\n    locationRef.current = match.params.location;\r\n  }, [match.params.location])\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <ListingsSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <ErrorBanner\r\n          description=\"We either couldn't find anything matching your search or have encountered an error. If you're searching for a unique location, try searching again with more common keywords\"\r\n        />\r\n        <ListingsSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  const listings = data ? data.listings : null;\r\n  const listingsRegion =\r\n    !listings ? null :\r\n      listings.region === \"Baztan, Comunidad Foral de Navarra, ES\" ? listings.region = \"Cancún, Quintana Roo, Mexico\" :\r\n        listings.region;\r\n  \r\n  const listingsSectionElement = listings && listings.result.length ? (\r\n    <div>\r\n      <Affix offsetTop={64}>\r\n        <div>\r\n            <ListingsPagination\r\n            total={listings.total}\r\n            page={page}\r\n            limit={PAGE_LIMIT}\r\n            setPage={setPage}\r\n          />\r\n          <ListingsFilters filter={filter} setFilter={setFilter} />\r\n        </div>\r\n      </Affix>\r\n      <List\r\n        grid={{\r\n          gutter: 8,\r\n          column: 4,\r\n          xs: 1,\r\n          sm: 2,\r\n          lg: 4\r\n        }}\r\n        dataSource={listings.result}\r\n        renderItem={listing => (\r\n          <List.Item>\r\n            <ListingCard listing={listing} />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n    \r\n  ) : (\r\n      <div>\r\n        <Paragraph>It appears that no listings have yet been created for { \" \"}\r\n          <Text>\"{listingsRegion}\"</Text>\r\n        </Paragraph>\r\n        <Paragraph>Be the first person to create a <Link to=\"/host\">listing in this area</Link>\r\n        </Paragraph>\r\n      </div>\r\n  );\r\n\r\n  const listingsRegionElement = listingsRegion ? (\r\n    <Title level={3} className=\"listings__title\">\r\n      Results for \"{ listingsRegion }\"\r\n    </Title>\r\n  ) : null;\r\n  return (\r\n    <Content className=\"listings\">\r\n      {listingsRegionElement}\r\n      {listingsSectionElement}\r\n    </Content>\r\n  );\r\n}","import { Link } from \"react-router-dom\";\r\nimport { Avatar, Divider, Tag, Typography } from 'antd';\r\nimport { Listing as ListingData } from \"../../../../lib/graphql/queries/Listing/__generated__/Listing\";\r\nimport { iconColor } from \"../../../../lib/utils\";\r\nimport { EnvironmentOutlined } from \"@ant-design/icons\";\r\n\r\ninterface Props {\r\n  listing: ListingData[\"listing\"];\r\n}\r\n\r\nconst { Paragraph, Title } = Typography;\r\n\r\nexport const ListingDetails = ({ listing }: Props) => {\r\n  const { title, description, image, type, address, city, numOfGuests, host } = listing;\r\n\r\n  return (\r\n    <div className=\"listing-details\">\r\n      <div\r\n        className=\"listing-details__image\"\r\n        style={{ backgroundImage: `url(${image})` }}\r\n      />\r\n\r\n      <div className=\"listing-details__information\">\r\n        <Paragraph type=\"secondary\" ellipsis className=\"listing-details__city-address\">\r\n          <Link to={`/listings/${city}`}>\r\n            <EnvironmentOutlined style={{color: iconColor}}/> {city}\r\n          </Link>\r\n          <Divider type=\"vertical\" />\r\n          {address}\r\n        </Paragraph>\r\n        <Title level={3} className=\"listing-details__title\">\r\n          {title}\r\n        </Title>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"listing-details__section\">\r\n        <Link to={`/user/${host.id}`}>\r\n          <Avatar src={host.avatar} size={64} />\r\n          <Title level={2} className=\"listing-details__host-name\">\r\n            {host.name}\r\n        </Title>\r\n        </Link>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"listing-details__section\">\r\n        <Title level={4}>About this space</Title>\r\n        <div className=\"listing-details__about-items\">\r\n          <Tag color=\"magenta\">{type}</Tag>\r\n          <Tag color=\"magenta\">{numOfGuests} Guests</Tag>\r\n        </div>\r\n        <Paragraph ellipsis={{ rows: 3, expandable: true }}>{description}</Paragraph>\r\n      </div>\r\n    </div>\r\n  );\r\n}","import { Typography, List, Avatar, Divider } from \"antd\";\r\nimport { Listing } from \"../../../../lib/graphql/queries/Listing/__generated__/Listing\"; \r\nimport { Link } from \"react-router-dom\";\r\n\r\ninterface Props {\r\n  listingBookings: Listing[\"listing\"][\"bookings\"];\r\n  bookingsPage: number;\r\n  limit: number;\r\n  setBookingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nexport const ListingBookings = ({\r\n  bookingsPage,\r\n  setBookingsPage,\r\n  limit,\r\n  listingBookings\r\n}: Props) => {\r\n  const result = listingBookings ? listingBookings.result : null;\r\n  const total = listingBookings ? listingBookings.total : null;\r\n\r\n  const listingBookingsList = listingBookings ? (\r\n    <List\r\n      grid={{\r\n        gutter: 8,\r\n        xs: 1,\r\n        sm: 2,\r\n        lg: 3,\r\n      }}\r\n      dataSource={result ? result: undefined}\r\n      locale={{ emptyText: \"No bookings have been made yet!\" }}\r\n      pagination={{\r\n        current: bookingsPage,\r\n        total: total ? total : undefined,\r\n        defaultPageSize: limit,\r\n        hideOnSinglePage: true,\r\n        showLessItems: true,\r\n        onChange: (page: number) => setBookingsPage(page)\r\n      }}\r\n      renderItem={listingBooking => {\r\n        const bookingHistory = (\r\n          <div className=\"listing-bookings__history\">\r\n            <div>\r\n              Check in: <Text strong>{listingBooking.checkIn}</Text>\r\n            </div>\r\n            <div>\r\n              Check out: <Text strong>{listingBooking.checkOut}</Text>\r\n            </div>\r\n          </div>\r\n        )\r\n\r\n        return (\r\n          <List.Item className=\"listing-bookings__item\">\r\n            {bookingHistory}\r\n            <Link to={`/user/${listingBooking.tenant.id}`}>\r\n              <Avatar\r\n                src={listingBooking.tenant.avatar}\r\n                size={64}\r\n                shape=\"square\"\r\n              />\r\n            </Link>\r\n          </List.Item>\r\n        );\r\n      }}\r\n    />\r\n  ) : null;\r\n\r\n  const listingBookingElement = listingBookingsList ? (\r\n    <div className=\"listing-bookings\">\r\n      <Divider />\r\n      <div className=\"listing-bookings__section\">\r\n        <Title level={4}>\r\n          Bookings\r\n        </Title>\r\n        {listingBookingsList}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return listingBookingElement;\r\n}","import { Button, Card, Divider, Typography, DatePicker } from \"antd\";\r\nimport moment, { Moment } from \"moment\";\r\nimport { Viewer } from \"../../../../lib/types\";\r\nimport { Listing as ListingData } from \"../../../../lib/graphql/queries/Listing/__generated__/Listing\";\r\nimport { formatListingPrice , displayErrorMessage} from \"../../../../lib/utils\";\r\nimport { BookingsIndex } from \"./types\";\r\n\r\ninterface Props {\r\n  host: ListingData[\"listing\"][\"host\"]\r\n  bookingsIndex: ListingData[\"listing\"][\"bookingsIndex\"]\r\n  viewer: Viewer\r\n  price: number\r\n  checkInDate: Moment | null\r\n  checkOutDate: Moment | null\r\n  setCheckInDate: (checkInDate: Moment | null) => void\r\n  setCheckOutDate: (checkOutDate: Moment | null) => void\r\n  setModalVisible: (modalVisible: boolean) => void\r\n}\r\n\r\nconst { Paragraph, Title, Text } = Typography;\r\n\r\nexport const ListingCreateBooking = ({\r\n  host,\r\n  viewer,\r\n  price,\r\n  bookingsIndex,\r\n  checkInDate,\r\n  checkOutDate,\r\n  setCheckInDate,\r\n  setCheckOutDate,\r\n  setModalVisible\r\n}: Props) => {\r\n  const bookingsIndexJSON: BookingsIndex = JSON.parse(bookingsIndex);\r\n\r\n  const dateIsBooked = (currentDate: Moment) => {\r\n    const year = moment(currentDate).year();\r\n    const month = moment(currentDate).month();\r\n    const day = moment(currentDate).date();\r\n\r\n    if (bookingsIndexJSON[year] && bookingsIndexJSON[year][month]) {\r\n      return Boolean(bookingsIndexJSON[year][month][day]);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const disabledDate = (currentDate: Moment) => {\r\n    if (currentDate) {\r\n      const dateIsBeforeEndOfDay = currentDate.isBefore(moment().endOf('day'));\r\n\r\n      return dateIsBeforeEndOfDay || dateIsBooked(currentDate);\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const verifyAndSetCheckOutDate = (newCheckOutDate: Moment | null) => {\r\n    if (checkInDate && newCheckOutDate) {\r\n      if (moment(newCheckOutDate).isBefore(checkInDate, 'days')) {\r\n        return displayErrorMessage(\r\n          \"You can't book date of check out to be prior to check in!\"\r\n        )\r\n      }\r\n\r\n      let dateCursor = checkInDate;\r\n\r\n      while (moment(dateCursor).isBefore(newCheckOutDate, \"days\")) {\r\n        dateCursor = moment(dateCursor).add(1, \"days\");\r\n        const year = moment(dateCursor).year();\r\n        const month = moment(dateCursor).month();\r\n        const day = moment(dateCursor).date();\r\n\r\n        if (bookingsIndexJSON[year] && bookingsIndexJSON[year][month] && bookingsIndexJSON[year][month][day]) {\r\n          return displayErrorMessage(\"You can't book a period of time that overlaps existing bookings. Plase try again.\")\r\n        }\r\n      }\r\n\r\n      setCheckOutDate(newCheckOutDate);\r\n    }\r\n  };\r\n\r\n  const viewerIsHost = viewer.id === host.id;\r\n  const checkInInputDisabled = !viewer.id || viewerIsHost || !host.hasWallet;\r\n  const checkOutInputDisabled = !checkInDate || checkInInputDisabled;\r\n  const buttonDisabled = !checkInDate || !checkOutDate || checkOutInputDisabled ;\r\n\r\n  let buttonMessage = \"You won't be charged yet!\";\r\n  if (!viewer.id) {\r\n    buttonMessage = \"You have to be signed in to book a listing!\"\r\n  } else if (viewerIsHost) {\r\n    buttonMessage = \"You can't book your own listing!\"\r\n  } else if (!host.hasWallet) {\r\n    buttonMessage = \"The host has disconnected from Stripe, and thus won't be able to receive payments!\"\r\n  }\r\n\r\n  return (\r\n    <div className=\"listing-booking\">\r\n      <Card className=\"listing-booking__card\">\r\n        <div>\r\n          <Paragraph>\r\n            <Title level={2} className=\"listing-booking__card-title\">\r\n              {formatListingPrice(price)}\r\n              <span>/day</span>\r\n            </Title>\r\n          </Paragraph>\r\n          <Divider />\r\n          <div className=\"listing-booking__card-date-picker\">\r\n            <Paragraph strong>Check In</Paragraph>\r\n            <DatePicker\r\n              value={checkInDate}\r\n              format={'YYYY/MM/DD'}\r\n              onChange={newCheckInDate => setCheckInDate(newCheckInDate)}\r\n              disabledDate={disabledDate}\r\n              showToday={false}\r\n              disabled={checkInInputDisabled}\r\n              onOpenChange={() => setCheckOutDate(null)}\r\n            />\r\n          </div>\r\n          <div className=\"listing-booking__card-date-picker\">\r\n            <Paragraph strong>Check Out</Paragraph>\r\n            <DatePicker\r\n              value={checkOutDate}\r\n              format={'YYYY/MM/DD'}\r\n              onChange={newCheckOutDate => verifyAndSetCheckOutDate(newCheckOutDate)}\r\n              disabledDate={disabledDate}\r\n              showToday={false}\r\n              disabled={checkOutInputDisabled}\r\n            />\r\n          </div>\r\n        </div>\r\n        <Divider />\r\n        <Button\r\n          size=\"large\"\r\n          type=\"primary\"\r\n          className=\"listing-booking__card-cta\"\r\n          disabled={buttonDisabled}\r\n          onClick={() => setModalVisible(true)}\r\n        >\r\n          Request to book!\r\n        </Button>\r\n        <Text strong mark type=\"secondary\">{buttonMessage}</Text>\r\n      </Card>\r\n    </div>\r\n  );\r\n}","import { KeyOutlined } from \"@ant-design/icons\";\r\nimport { Modal, Button, Divider, Typography } from \"antd\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { CREATE_BOOKING } from \"../../../../lib/graphql/mutations\";\r\nimport { CreateBooking as CreateBookingData, CreateBookingVariables } from \"../../../../lib/graphql/mutations/CreateBooking/__generated__/CreateBooking\";\r\nimport { displayErrorMessage, displaySuccessNotification } from \"../../../../lib/utils\";\r\nimport moment, { Moment } from 'moment';\r\nimport { CardElement, injectStripe, ReactStripeElements } from 'react-stripe-elements'\r\nimport { formatListingPrice } from '../../../../lib/utils';\r\n\r\ninterface Props {\r\n  price: number;\r\n  checkInDate: Moment;\r\n  checkOutDate: Moment;\r\n  modalVisible: boolean;\r\n  setModalVisible: (modaleVisible: boolean) => void;\r\n  id: string;\r\n  clearBookingData: () => void\r\n  handleListingRefetch: () => Promise<void>\r\n}\r\n\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const ListingCreateBookingModal = ({\r\n  modalVisible,\r\n  setModalVisible,\r\n  checkInDate,\r\n  checkOutDate,\r\n  price,\r\n  id,\r\n  clearBookingData,\r\n  handleListingRefetch,\r\n  stripe\r\n}: Props & ReactStripeElements.InjectedStripeProps) => {\r\n  const [createBooking, { loading }] = useMutation<\r\n    CreateBookingData,\r\n    CreateBookingVariables\r\n    >(CREATE_BOOKING, {\r\n      onCompleted: () => {\r\n        clearBookingData();\r\n        displaySuccessNotification(\r\n          \"You've succesfully booked the listing!\",\r\n          \"Booking history can always be found in your User page.\"\r\n        );\r\n        handleListingRefetch();\r\n      },\r\n      onError: () => {\r\n        displayErrorMessage(\"Sorry! We weren't able to succesfully book the listing. Please try again later.\")\r\n      }\r\n  });\r\n\r\n  const daysBooked = checkOutDate.diff(checkInDate, \"days\") + 1;\r\n  const listingPrice = price * daysBooked;\r\n\r\n  const handleCreateBooking = async () => {\r\n    if (!stripe) {\r\n      return displayErrorMessage(\"Sorry! We weren't able to connet with Stripe.\");\r\n    }\r\n\r\n    const { token: stripeToken, error } = await stripe.createToken();\r\n    if (stripeToken) {\r\n      createBooking({\r\n        variables: {\r\n          input: {\r\n            id,\r\n            source: stripeToken.id,\r\n            checkIn: moment(checkInDate).format(\"YYYY-MM-DD\"),\r\n            checkOut: moment(checkOutDate).format(\"YYYY-MM-DD\"),\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      displayErrorMessage(\r\n        error && error.message\r\n          ? error.message :\r\n          \"Sorry! We weren't able to book the listing. Please try again later.\"\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      visible={modalVisible}\r\n      centered\r\n      footer={null}\r\n      onCancel={() => setModalVisible(false)}\r\n    >\r\n      <div className=\"listing-booking-modal\">\r\n        <div className=\"listing-booking-modal__intro\">\r\n          <Title className=\"listing-booking-modal__intro-title\">\r\n            <KeyOutlined />\r\n          </Title>\r\n          <Title level={3} className=\"listing-booking-modal__intro-title\">\r\n            Book your trip\r\n          </Title>\r\n          <Paragraph>\r\n            Enter your payment informatiON to book the listing from the dates between{\" \"}\r\n            <Text strong mark>{moment(checkInDate).format(\"MMMM Do YYYY\")}</Text> and{\" \"}\r\n            <Text strong mark>{moment(checkOutDate).format(\"MMMM Do YYYY\")}</Text>\r\n            , inclusive.\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div className=\"listing-booking-modal__charge-summary\">\r\n          <Paragraph>\r\n            {formatListingPrice(price, false)} * {daysBooked} days ={\" \"}\r\n            <Text strong>{formatListingPrice(listingPrice, false)}</Text>\r\n          </Paragraph>\r\n          <Paragraph className=\"listing-booking-modal__charge-summary-total\">\r\n            Total = <Text mark>{formatListingPrice(listingPrice, false)}</Text>\r\n          </Paragraph>\r\n        </div>\r\n\r\n        <Divider />\r\n\r\n        <div className=\"listing-booking-modal__stripe-card-section\">\r\n          <CardElement\r\n            className=\"listing-booking-modal__stripe-card\"\r\n            hidePostalCode\r\n          />\r\n          <Button\r\n            size=\"large\"\r\n            type=\"primary\"\r\n            className=\"listing-booking-modal__cta\"\r\n            onClick={handleCreateBooking}\r\n            loading={loading}\r\n          >\r\n            Book\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport const WrappedListingCreateBookingModal = injectStripe(ListingCreateBookingModal);","import { useState } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom';\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { PageSkeleton } from '../../lib/components';\r\nimport { ErrorBanner } from '../../lib/components';\r\nimport { Layout, Col, Row } from 'antd';\r\nimport { Moment } from 'moment';\r\nimport { LISTING } from '../../lib/graphql/queries';\r\nimport { Listing as ListingData, ListingVariables } from '../../lib/graphql/queries/Listing/__generated__/Listing';\r\nimport {\r\n  ListingBookings,\r\n  ListingCreateBooking,\r\n  ListingDetails,\r\n  WrappedListingCreateBookingModal as ListingCreateBookingModal\r\n} from './components';\r\nimport { Viewer } from '../../lib/types';\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\ninterface Props {\r\n  viewer: Viewer;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst PAGE_LIMIT = 3;\r\n\r\nexport const Listing = ({ match, viewer }: Props & RouteComponentProps<MatchParams>) => {\r\n  const [bookingsPage, setBookingsPage] = useState(1);\r\n  const [checkInDate, setCheckInDate] = useState<Moment | null>(null);\r\n  const [checkOutDate, setCheckOutDate] = useState<Moment | null>(null);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n\r\n  const { loading, data, error, refetch } = useQuery<ListingData, ListingVariables>(LISTING, {\r\n    variables: {\r\n      id: match.params.id,\r\n      bookingsPage,\r\n      limit: PAGE_LIMIT,\r\n    }\r\n  });\r\n\r\n  const clearBookingData = () => {\r\n    setModalVisible(false);\r\n    setCheckInDate(null);\r\n    setCheckOutDate(null);\r\n  };\r\n\r\n  const handleListingRefetch = async () => {\r\n    await refetch();\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <PageSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Content className=\"listings\">\r\n        <ErrorBanner description=\"This listing may not exist or we've encountered an error. Please try again soon!\" />\r\n        <PageSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  const listing = data ? data.listing : null;\r\n  const listingBookings = listing ? listing.bookings : null;\r\n\r\n  const listingDetailsElement = listing ? (\r\n    <ListingDetails listing={listing} />\r\n  ) : null;\r\n\r\n  const listingBookingsElement = listingBookings ? (\r\n    <ListingBookings\r\n      listingBookings={listingBookings}\r\n      bookingsPage={bookingsPage}\r\n      limit={PAGE_LIMIT}\r\n      setBookingsPage={setBookingsPage}\r\n    />\r\n  ) : null;\r\n\r\n  const listingCreateBookingElement = listing ? (\r\n    <ListingCreateBooking\r\n      host={listing.host}\r\n      price={listing.price}\r\n      bookingsIndex={listing.bookingsIndex}\r\n      checkInDate={checkInDate}\r\n      checkOutDate={checkOutDate}\r\n      setCheckInDate={setCheckInDate}\r\n      setCheckOutDate={setCheckOutDate}\r\n      viewer={viewer}\r\n      setModalVisible={setModalVisible}\r\n    />\r\n  ) : null;\r\n\r\n  const listingCreateBookingModalElement = listing && checkInDate && checkOutDate ? (\r\n    <ListingCreateBookingModal\r\n      modalVisible={modalVisible}\r\n      setModalVisible={setModalVisible}\r\n      price={listing.price}\r\n      checkInDate={checkInDate}\r\n      checkOutDate={checkOutDate}\r\n      id={listing.id}\r\n      clearBookingData={clearBookingData}\r\n      handleListingRefetch={handleListingRefetch}\r\n    />\r\n  ) : null;\r\n\r\n  return (\r\n    <Content className=\"listings\">\r\n      <Row gutter={24} justify=\"space-between\">\r\n        <Col xs={24} lg={14}>\r\n          {listingDetailsElement}\r\n          {listingBookingsElement}\r\n        </Col>\r\n        <Col xs={25} lg={10}>\r\n          {listingCreateBookingElement}\r\n        </Col>\r\n      </Row>\r\n      {listingCreateBookingModalElement}\r\n    </Content>\r\n  );\r\n}","export const NotFound = () => {\r\n  return <h2>NotFound</h2>;\r\n}","import { useEffect, useRef } from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { useApolloClient, useMutation } from '@apollo/react-hooks';\r\nimport { Card, Layout, Typography, Spin } from 'antd';\r\nimport { ErrorBanner } from '../../lib/components';\r\nimport { AUTH_URL } from '../../lib/graphql/queries';\r\nimport { LOG_IN } from '../../lib/graphql/mutations';\r\nimport { AuthUrl as AuthUrlData } from \"../../lib/graphql/queries/AuthUrl/__generated__/AuthUrl\"\r\nimport { LogIn as LogInData, LogInVariables } from \"../../lib/graphql/mutations/LogIn/__generated__/LogIn\"\r\nimport { displaySuccessNotification, displayErrorMessage } from '../../lib/utils';\r\nimport { Viewer } from '../../lib/types';\r\n\r\nimport googleLogo from './assets/google_logo.jpg';\r\n\r\ninterface Props {\r\n  setViewer: (viewer: Viewer) => void;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst { Text, Title } = Typography;\r\n\r\nexport const Login = ({ setViewer }: Props) => {\r\n  const client = useApolloClient();\r\n  const [\r\n    logIn,\r\n    { data: logInData, loading: logInLoading, error: logInError }\r\n  ] = useMutation<LogInData, LogInVariables>(LOG_IN, {\r\n    onCompleted: (data) => {\r\n      if (data && data.logIn && data.logIn.token) {\r\n        setViewer(data.logIn);\r\n        sessionStorage.setItem(\"token\", data.logIn.token);\r\n        displaySuccessNotification(\"You've succesfully logged in!\")\r\n      }\r\n    }\r\n  });\r\n  const logInRef = useRef(logIn);\r\n  \r\n  useEffect(() => {\r\n    const code = new URL(window.location.href).searchParams.get(\"code\");\r\n\r\n    if (code) {\r\n      logInRef.current({\r\n        variables: {\r\n          input: { code }\r\n        }\r\n      })\r\n    }\r\n  }, [])\r\n\r\n  const handleAuthorize = async () => {\r\n    try {\r\n      const { data } = await client.query<AuthUrlData>({\r\n        query: AUTH_URL\r\n      });\r\n      window.location.href = data.authUrl;\r\n    } catch (error) {\r\n      displayErrorMessage(\"Sorry! We weren't able to log you in. Please try again later!\")\r\n    }\r\n  }\r\n\r\n  if (logInLoading) {\r\n    return (\r\n      <Content className=\"log-in\">\r\n        <Spin size=\"large\" tip=\"Logging you in...\" />\r\n      </Content>\r\n    );\r\n  };\r\n\r\n  if (logInData && logInData.logIn) {\r\n    const { id: viewerId } = logInData.logIn;\r\n    return <Redirect to={`/user/${viewerId}`} />\r\n  }\r\n\r\n  const logInErrorBannerElement = logInError ? (\r\n    <ErrorBanner description=\"Sorry! We weren't able to log you in. Please try again later!\" />\r\n  ) : null;\r\n\r\n  return (\r\n    <Content className=\"log-in\">\r\n      { logInErrorBannerElement }\r\n      <Card className=\"log-in-card\">\r\n        <div className=\"log-in-card__intro\">\r\n          <Title className=\"log-in-card__intro-title\" level={3}>\r\n            <span role=\"img\" aria-label=\"wave\">\r\n              👋\r\n            </span>\r\n          </Title>\r\n          <Title className=\"log-in-card__intro-title\" level={3}>\r\n            Log in to TinyHouse!\r\n          </Title>\r\n          <Text>Sign in with Google to start booking available rentals!</Text>\r\n        </div>\r\n        <button className=\"log-in-card__google-button\" onClick={handleAuthorize}>\r\n          <img src={googleLogo} alt=\"Google Logo\" className=\"log-in-card__google-button-logo\" />\r\n          <span className=\"log-in-card__google-button-text\">\r\n            Sign in with Google\r\n          </span>\r\n        </button>\r\n        <Text type=\"secondary\">\r\n          Note: By signing in, you'll be redirected to the Google consent form\r\n          to sign in with your Google account.\r\n        </Text>\r\n      </Card>\r\n    </Content>\r\n  );\r\n}","export default \"data:image/jpeg;base64,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\"","import { Fragment } from \"react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { Avatar, Card, Divider, Typography, Button, Tag } from \"antd\";\r\nimport { User as UserData } from '../../../../lib/graphql/queries/User/__generated__/User'\r\nimport { displayErrorMessage, displaySuccessNotification, formatListingPrice } from \"../../../../lib/utils\";\r\nimport { DisconnectStripe as DisconnectStripeData } from \"../../../../lib/graphql/mutations/DisconnectStripe/__generated__/DisconnectStripe\";\r\nimport { DISCONNECT_STRIPE } from \"../../../../lib/graphql/mutations\";\r\nimport { Viewer } from \"../../../../lib/types\";\r\n\r\ninterface Props {\r\n  user: UserData['user'];\r\n  viewerIsUser: boolean;\r\n  viewer: Viewer;\r\n  setViewer: (viewer:  Viewer) => void,\r\n  handleUserRefetch: () => Promise<void>;\r\n}\r\n\r\nconst stripeAuthUrl = `https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${process.env.REACT_APP_S_CLIENT_ID}&scope=read_write&redirect_uri=http://localhost:3000/stripe`;\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const UserProfile = ({ user, viewerIsUser, viewer, setViewer, handleUserRefetch }: Props) => {\r\n  const [disconnectStripe, { loading }] = useMutation<DisconnectStripeData>(DISCONNECT_STRIPE, {\r\n    onCompleted: (data) => {\r\n      if (data && data.disconnectStripe) {\r\n        setViewer({...viewer, hasWallet: data.disconnectStripe.hasWallet })\r\n        displaySuccessNotification(\r\n          \"You've successfully disconnected from Stripe!\",\r\n          \"You'll have to reconnect with Stripe to continue to create listings.\"\r\n        );\r\n        handleUserRefetch();\r\n      }\r\n    },\r\n    onError: () => {\r\n      displayErrorMessage(\r\n        \"Sorry! We weren't able to disconnect you from Stripe. Please try again later.\"\r\n      )\r\n    }\r\n  });\r\n\r\n  const redirectToStripe = () => {\r\n    window.location.href = stripeAuthUrl;\r\n  }\r\n\r\n  const additionalDetails = user.hasWallet ? (\r\n    <Fragment>\r\n      <Paragraph>\r\n        <Tag color=\"green\">Stripe Registered</Tag>\r\n      </Paragraph>\r\n      <Paragraph>\r\n        Income Earned: {\" \"}\r\n        <Text strong>{user.income ? formatListingPrice(user.income) : `$0`}</Text>\r\n      </Paragraph>\r\n      <Button type=\"primary\" className=\"user-profile__details-cta\" loading={loading} onClick={() => disconnectStripe()}>\r\n        Disconnect Stripe\r\n      </Button>\r\n      <Paragraph type=\"secondary\">\r\n        By disconnecting, you won't be able to receive{\" \"}\r\n        <Text strong>any futher payments</Text>. This will prevent users from booking\r\n        listings that you might have already created.\r\n      </Paragraph>\r\n    </Fragment>\r\n  ): (\r\n    <Fragment>\r\n      <Paragraph>\r\n          Interested in becoming a TinyHouse host? Register with your Stripe account!\r\n        </Paragraph>\r\n        <Button\r\n          type=\"primary\"\r\n          className=\"user-profile__details-cta\"\r\n          onClick={redirectToStripe}\r\n        >\r\n          Connect with Stripe\r\n        </Button>\r\n        <Paragraph type=\"secondary\">\r\n          TinyHouse uses <a href=\"https://stripe.com/en-US/connect\" target=\"_blank\" rel=\"noopener noreferrer\">Stripe</a> to help transfer your earnings in a secure and trusted manner.\r\n        </Paragraph>\r\n    </Fragment>\r\n  );\r\n    \r\n  const additionalDetailsSection = viewerIsUser ? (\r\n    <Fragment>\r\n      <Divider />\r\n      <div className=\"user-profile__details\">\r\n        <Title level={4}>\r\n          Additional Details\r\n        </Title>\r\n        {additionalDetails}\r\n      </div>\r\n    </Fragment>\r\n  ): null;\r\n\r\n  return (\r\n    <div className=\"user-profile\">\r\n      <Card className=\"user-profile__card\">\r\n        <div className=\"user-profile__avatar\">\r\n          <Avatar size={100} src={user.avatar} />\r\n        </div>\r\n        <Divider />\r\n        <div className=\"user-profile__details\">\r\n          <Title level={4}>Details</Title>\r\n          <Paragraph>\r\n            Name: <Text strong>{user.name}</Text>\r\n          </Paragraph>\r\n          <Paragraph>\r\n            Contact: <Text strong>{user.contact}</Text>\r\n          </Paragraph>\r\n        </div>\r\n        {additionalDetailsSection}\r\n      </Card>\r\n    </div>\r\n  );\r\n}","import { Typography, List } from \"antd\";\r\nimport { ListingCard } from \"../../../../lib/components\";\r\nimport { User } from \"../../../../lib/graphql/queries/User/__generated__/User\"; \r\n\r\ninterface Props {\r\n  userBookings: User[\"user\"][\"bookings\"];\r\n  bookingsPage: number;\r\n  limit: number;\r\n  setBookingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Paragraph, Text, Title } = Typography;\r\n\r\nexport const UserBookings = ({\r\n  bookingsPage,\r\n  setBookingsPage,\r\n  limit,\r\n  userBookings\r\n}: Props) => {\r\n  const result = userBookings ? userBookings.result : null;\r\n  const total = userBookings ? userBookings.total : null;\r\n\r\n  const userBookingsList = userBookings ? (\r\n    <List\r\n      grid={{\r\n        gutter: 8,\r\n        xs: 1,\r\n        sm: 2,\r\n        lg: 4,\r\n      }}\r\n      dataSource={result ? result: undefined}\r\n      locale={{ emptyText: \"You haven't made any bookings!\" }}\r\n      pagination={{\r\n        position: \"top\",\r\n        current: bookingsPage,\r\n        total: total ? total : undefined,\r\n        defaultPageSize: limit,\r\n        hideOnSinglePage: true,\r\n        showLessItems: true,\r\n        onChange: (page: number) => setBookingsPage(page)\r\n      }}\r\n      renderItem={userBooking => {\r\n        const bookingHistory = (\r\n          <div className=\"user-bookings__booking-history\">\r\n            <div>\r\n              Check in: <Text strong>{userBooking.checkIn}</Text>\r\n            </div>\r\n            <div>\r\n              Check out: <Text strong>{userBooking.checkOut}</Text>\r\n            </div>\r\n          </div>\r\n        )\r\n\r\n        return (\r\n          <List.Item>\r\n            {bookingHistory}\r\n            <ListingCard listing={userBooking.listing} />\r\n          </List.Item>\r\n        );\r\n      }}\r\n    />\r\n  ) : null;\r\n\r\n  const userBookingElement = userBookingsList ? (\r\n    <div className=\"user-bookings\">\r\n      <Title level={4} className=\"user-bookings__title\">\r\n        Bookings\r\n      </Title>\r\n      <Paragraph className=\"user-bookings__description\">\r\n        This section highlights the bookings you've made and the check-in/check-out dates associated with said bookings.\r\n      </Paragraph>\r\n      {userBookingsList}\r\n    </div>\r\n  ) : null;\r\n\r\n  return userBookingElement;\r\n}","import { List, Typography } from \"antd\";\r\nimport { ListingCard } from \"../../../../lib/components\";\r\nimport { User } from \"../../../../lib/graphql/queries/User/__generated__/User\";\r\n\r\ninterface Props {\r\n  userListings: User[\"user\"][\"listings\"];\r\n  listingsPage: number;\r\n  limit: number;\r\n  setListingsPage: (page: number) => void;\r\n}\r\n\r\nconst { Paragraph, Title } = Typography;\r\n\r\nexport const UserListings = ({\r\n  userListings,\r\n  listingsPage,\r\n  limit,\r\n  setListingsPage\r\n}: Props) => {\r\n  const { total, result } = userListings;\r\n\r\n  const userListingsList = (\r\n    <List\r\n      grid={{\r\n        gutter: 8,\r\n        column: 4,\r\n        xs: 1,\r\n        sm: 2,\r\n        lg: 4\r\n      }}\r\n      dataSource={result}\r\n      locale={{ emptyText: \"User doesn't have any listings yet!\" }}\r\n      pagination={{\r\n        position: \"top\",\r\n        current: listingsPage,\r\n        total,\r\n        defaultPageSize: limit,\r\n        hideOnSinglePage: true,\r\n        showLessItems: true,\r\n        onChange: (page: number) => setListingsPage(page)\r\n      }}\r\n      renderItem={userListing => (\r\n        <List.Item>\r\n          <ListingCard listing={userListing} />\r\n        </List.Item>\r\n      )}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <div className=\"user-listings\">\r\n      <Title level={4} className=\"user-listings__title\">\r\n        Listings\r\n      </Title>\r\n      <Paragraph className=\"user-listings__description\">\r\n        This section highlights the listings this user currently hosts and has\r\n        made available for bookings.\r\n      </Paragraph>\r\n      {userListingsList}\r\n    </div>\r\n  );\r\n};\r\n","import { useState } from 'react';\r\nimport { RouteComponentProps } from 'react-router-dom'\r\nimport { useQuery } from '@apollo/react-hooks';\r\nimport { Col, Layout, Row } from 'antd';\r\nimport { USER } from '../../lib/graphql/queries';\r\nimport { User as UserData, UserVariables } from '../../lib/graphql/queries/User/__generated__/User';\r\nimport { UserBookings, UserListings, UserProfile } from './components';\r\nimport { Viewer } from \"../../lib/types\";\r\nimport { ErrorBanner, PageSkeleton } from '../../lib/components'\r\n\r\ninterface Props {\r\n  viewer: Viewer;\r\n  setViewer: (viewer: Viewer) => void\r\n}\r\n\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\nconst { Content } = Layout;\r\nconst PAGE_LIMIT = 4;\r\n\r\nexport const User = ({\r\n  match,\r\n  viewer,\r\n  setViewer\r\n}: Props & RouteComponentProps<MatchParams>) => {\r\n  const [listingsPage, setListingsPage] = useState(1);\r\n  const [bookingsPage, setBookingsPage] = useState(1);\r\n\r\n  const { data, loading, error, refetch } = useQuery<UserData, UserVariables>(USER, {\r\n    variables: {\r\n      id: match.params.id,\r\n      bookingsPage,\r\n      listingsPage,\r\n      limit: PAGE_LIMIT\r\n    }\r\n  });\r\n  \r\n  const handleUserRefetch = async () => {\r\n    await refetch();\r\n  }\r\n\r\n  const stripeError = new URL(window.location.href).searchParams.get(\"stripe_error\");\r\n  const stripeErrorBanner = stripeError ? (\r\n    <ErrorBanner description=\"We had an issue connecting with Stripe. Please try again later.\"/>\r\n  ): null;\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"user\">\r\n        <PageSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Content className=\"user\">\r\n        <ErrorBanner description=\"This user may not exists or we've encountered an error. Plase try again later.\" />\r\n        <PageSkeleton />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  const user = data ? data.user : null;\r\n  console.log(user);\r\n  const viewerIsUser = viewer.id === match.params.id;\r\n\r\n  const userListings = user ? user.listings : null;\r\n  const userBookings = user ? user.bookings : null;\r\n\r\n  const userProfileElement = user ? (\r\n    <UserProfile\r\n      user={user}\r\n      viewerIsUser={viewerIsUser}\r\n      viewer={viewer}\r\n      setViewer={setViewer}\r\n      handleUserRefetch={handleUserRefetch}\r\n    />\r\n  ) : null;\r\n\r\n  const userListingsElement = userListings ? (\r\n    <UserListings\r\n      userListings={userListings}\r\n      listingsPage={listingsPage}\r\n      limit={PAGE_LIMIT}\r\n      setListingsPage={setListingsPage}\r\n    />\r\n  ) : null;\r\n\r\n  const userBookingsElement = userBookings ? (\r\n    <UserBookings\r\n      userBookings={userBookings}\r\n      bookingsPage={bookingsPage}\r\n      limit={PAGE_LIMIT}\r\n      setBookingsPage={setBookingsPage}\r\n    />\r\n  ) : null;\r\n\r\n  return (\r\n    <Content className=\"user\">\r\n      {stripeErrorBanner}\r\n      <Row gutter={12} justify=\"space-between\">\r\n        <Col xs={24}>{userProfileElement}</Col>\r\n        <Col xs={24}>\r\n          {userListingsElement}\r\n          {userBookingsElement}\r\n        </Col>\r\n      </Row>\r\n    </Content>\r\n  );\r\n}","import { useMutation } from \"@apollo/react-hooks\";\r\nimport { Layout, Spin } from 'antd';\r\nimport { useEffect, useRef } from \"react\";\r\nimport { Redirect, RouteComponentProps } from \"react-router\";\r\nimport { CONNECT_STRIPE } from \"../../lib/graphql/mutations\";\r\nimport { ConnectStripe as ConnectStripeData, ConnectStripeVariables } from \"../../lib/graphql/mutations/ConnectStripe/__generated__/ConnectStripe\";\r\nimport { Viewer } from \"../../lib/types\";\r\nimport { displaySuccessNotification } from \"../../lib/utils\";\r\n\r\nconst { Content } = Layout;\r\n\r\ninterface Props {\r\n  viewer: Viewer;\r\n  setViewer: (viewer: Viewer) => void\r\n}\r\n\r\nexport const Stripe = ({ viewer, setViewer, history }: Props & RouteComponentProps) => {\r\n  const [connectStripe, { data, loading, error }] = useMutation<\r\n    ConnectStripeData,\r\n    ConnectStripeVariables\r\n    >(CONNECT_STRIPE, {\r\n      onCompleted: data => {\r\n      if (data && data.connectStripe) {\r\n        setViewer({ ...viewer, hasWallet: data.connectStripe.hasWallet });\r\n        displaySuccessNotification(\"You've successfully connected your Stripe Account!\", \"You can now begin to create listings in the Host page\");\r\n      }\r\n    }\r\n  });\r\n  const connectStripeRef = useRef(connectStripe);\r\n\r\n  useEffect(() => {\r\n    const code = new URL(window.location.href).searchParams.get(\"code\");\r\n\r\n    if (code) {\r\n      connectStripeRef.current({\r\n        variables: {\r\n          input: { code }\r\n        }\r\n      });\r\n    } else {\r\n      history.replace(\"/login\");\r\n    }\r\n  }, [history]);\r\n\r\n  if (data && data.connectStripe) {\r\n    return <Redirect to={`/user/${viewer.id}`}/>\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <Content className=\"stripe\">\r\n        <Spin size=\"large\" tip=\"Connecting your Stripe account...\" />\r\n      </Content>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <Redirect to={`/user/${viewer.id}?stripe_error=true`} />\r\n  }\r\n\r\n  return null;\r\n}","import { useState, useEffect, useRef } from 'react';\nimport { render } from 'react-dom';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider, useMutation } from 'react-apollo';\nimport { Layout, Affix, Spin } from 'antd';\nimport { Listings, Home, Host, Listing, NotFound, User, Login, AppHeader, Stripe } from './sections';\nimport { LOG_IN } from './lib/graphql/mutations';\nimport { LogIn as LogInData, LogInVariables } from './lib/graphql/mutations/LogIn/__generated__/LogIn';\nimport { Viewer } from './lib/types';\nimport './styles/index.css';\nimport { StripeProvider, Elements } from 'react-stripe-elements';\nimport { AppHeaderSkeleton, ErrorBanner } from './lib/components';\n\nconst client = new ApolloClient({\n  uri: \"/api\",\n  request: async operation => {\n    const token = sessionStorage.getItem(\"token\");\n    operation.setContext({\n      headers: {\n        \"X-CSRF-TOKEN\": token || \"\"\n      }\n    })\n  }\n});\n\nconst initialViewer: Viewer = {\n  id: null,\n  token: null,\n  avatar: null,\n  hasWallet: null,\n  didRequest: false\n}\n\nconst App = () => {\n  const [viewer, setViewer] = useState<Viewer>(initialViewer);\n  const [logIn, { error }] = useMutation<LogInData, LogInVariables>(LOG_IN, {\n    onCompleted: data => {\n      if (data && data.logIn) {\n        setViewer(data.logIn);\n\n        if (data.logIn.token) {\n          sessionStorage.setItem(\"token\", data.logIn.token);\n        } else {\n          sessionStorage.removeItem(\"token\");\n        }\n      }\n    }\n  });\n  const logInRef = useRef(logIn)\n  useEffect(() => {\n    logInRef.current();\n  }, []);\n\n  if (!viewer.didRequest && !error) {\n    return (\n      <Layout className=\"app-skeleton\">\n        <AppHeaderSkeleton />\n        <div className=\"app-skeleton__spin-section\">\n          <Spin size=\"large\" tip=\"Launching TinyHouse\" />\n        </div>\n      </Layout>\n    );\n  }\n\n  const logInErrorBannerElement = error\n    ? <ErrorBanner\n      description=\"We weren't able to verify if you were logged in. Please try again later!\"\n    />\n    : null;\n\n  return (\n    <StripeProvider apiKey={process.env.REACT_APP_S_PUBLISHABLE_KEY as string}>\n      <Router>\n        <Layout id=\"app\">\n          { logInErrorBannerElement }\n          <Affix offsetTop={0} className=\"app__affix-header\" >\n            <AppHeader viewer={viewer} setViewer={setViewer} />\n          </Affix>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route\n              exact\n              path=\"/host\"\n              render={props => <Host {...props} viewer={viewer}/>}\n            />\n            <Route\n              exact\n              path=\"/listing/:id\"\n              render={props => <Elements><Listing {...props} viewer={viewer}/></Elements>}\n            />\n            <Route exact path=\"/listings/:location?\" component={Listings} />\n            <Route\n              exact\n              path=\"/login\"\n              render={props => <Login {...props} setViewer={setViewer} />}\n            />\n            <Route\n              exact\n              path=\"/stripe\"\n              render={props => <Stripe {...props} viewer={viewer} setViewer={setViewer} />}\n            />\n            <Route\n              exact\n              path=\"/user/:id\"\n              render={props => <User {...props} viewer={viewer} setViewer={setViewer} />}\n            />\n            <Route component={NotFound} />\n          </Switch>\n        </Layout>\n      </Router>\n    </StripeProvider>\n  );\n}\n\nrender(\n  <ApolloProvider client={client}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}